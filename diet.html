<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"
    integrity="sha512-p7Ey2nBhKYEi9yh0iDs+GMA0ttebOqVl3OO2oWRzRxtDoN/RedyYcHFUJZhMVi8NKRdEA7n+9NTNQX/kFIZgNw=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <!-- 폰트_프리텐다드-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pretendard/1.3.9/static/pretendard.css"
    integrity="sha512-NzqTHTrO48HsIamogmIaVhTXoSgRF24Cn+ynrNYrFuKrY0AdDbmcNieiOHsQARS/r0Gax9VwV3/rVMHs3ipUlg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- CSS -->
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/diary/diet.css">
  <title>할수잇서</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"
    integrity="sha512-uto9mlQzrs59VwILcLiRYeLKPPbS/bT71da/OEBYEwcdNUk8jYIy+D176RYoop1Da+f9mvkYrmj5MCLZWEtQuA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css"
    integrity="sha512-aOG0c6nPNzGk+5zjwyJaoRUgCdOrfSDhmMID2u4+OIslr0GjpLKo7Xm0Ao3xmpM4T8AmIouRkqwj1nrdVsLKEQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="./css/diary/exercise.css">
  <script src="./script/exercise.js"></script>
  <script src="./script/diet.js"></script>
</head>

<body class="diet-page" style="margin-bottom: 790px !important;">
  <div class="page_title_box">
    <a href="exercise.html">
      <h2 class="page_title">운동 일지
    </a></h2>
    <a href="diet.html">
      <h2 class="page_title">식단 일지
    </a></h2>
  </div>

  <div id="calendar">
    <div class="cal-month"></div>

  </div>


  <script>
    // $ 기호 사용하여 함수 실행
    $(function () {
      // datepicker를 inline 모드로 초기화하여 특정 div에 적용
      $("#calendar").datepicker({
        inline: true
      });
    });

    // datepicker 기본값 설정
    $.datepicker.setDefaults({
      dateFormat: 'yy-mm-dd',
      monthNames: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
      monthNamesShort: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
      dayNames: ['일', '월', '화', '수', '목', '금', '토'],
      dayNamesShort: ['일', '월', '화', '수', '목', '금', '토'],
      dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'],
      showMonthAfterYear: true,
      yearSuffix: '년'
    });

    // 클래스 이름이 datepicker인 요소에 datepicker 적용
    $(function () {
      $('.datepicker').datepicker();
    });

  </script>


  <div class="diet_add">
    <!--아침-->
    <div class="meal-box" id="breakfast">
      <img src="./img/breakfast.svg" alt="먹은 것 추가">
      <h3>아침</h3>
      <div class="menu_list"></div>
      <p id="breakfastCalories">0 Cal</p>
      <div class="button-container">
        <button onclick="openModal('아침')">
          <img src="./img/add.svg" alt="먹은 것 추가">
        </button>
      </div>

    </div>

    <!--점심-->
    <div class="meal-box" id="lunch">
      <img src="./img/lunch.svg" alt="먹은 것 추가">
      <h3>점심</h3>
      <div class="menu_list"></div>
      <p id="lunchCalories">0 Cal</p>
      <button onclick="openModal('점심')">
        <img src="./img/add.svg" alt="먹은 것 추가">
      </button>
    </div>

    <!--저녁-->
    <div class="meal-box" id="dinner">
      <img src="./img/dinner.svg" alt="먹은 것 추가">
      <h3>저녁</h3>
      <div class="menu_list"></div>
      <p id="dinnerCalories">0 Cal</p>
      <button onclick="openModal('저녁')">
        <img src="./img/add.svg" alt="먹은 것 추가">
      </button>
    </div>

    <!--간식-->
    <div class="meal-box" id="snack">
      <img src="./img/snack.svg" alt="먹은 것 추가">
      <h3>간식</h3>
      <div class="menu_list"></div>
      <p id="snackCalories">0 Cal</p>
      <button onclick="openModal('간식')">
        <img src="./img/add.svg" alt="먹은 것 추가">
      </button>
    </div>
  </div>

  <!--모달-->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h2 id="meal-type"></h2>
      <form id="meal-form">
        <div class="form-group">
          <label for="food">음식:</label>
          <input type="text" id="foodName" name="foodName" required>
        </div>

        <!-- 칼로리 입력칸 -->
        <div class="form-group">
          <label for="calories">칼로리:</label>
          <input type="number" id="calories" name="calories" required>
        </div>
        <!--추가 버튼-->
        <button type="submit" class="cal-button" onclick="closeModal()">추가</button>
      </form>
    </div>
  </div>

  <script>
      // 아침 식사에 대한 총 칼로리를 저장할 변수
    var breakfastTotalCalories = 0;
    // 점심 식사에 대한 총 칼로리를 저장할 변수
    var lunchTotalCalories = 0;
    // 저녁 식사에 대한 총 칼로리를 저장할 변수
    var dinnerTotalCalories = 0;
    // 간식에 대한 총 칼로리를 저장할 변수
    var snackTotalCalories = 0;

    // 모든 아침 메뉴와 칼로리를 관리할 배열
    var breakfastMenu = [];
    // 모든 점심 메뉴와 칼로리를 관리할 배열
    var lunchMenu = [];
    // 모든 저녁 메뉴와 칼로리를 관리할 배열
    var dinnerMenu = [];
    // 모든 간식 메뉴와 칼로리를 관리할 배열
    var snackMenu = [];

    // 모달 확인 버튼에 대한 이벤트 핸들러
    document.getElementById('meal-form').addEventListener('submit', function(event) {
      event.preventDefault(); // 폼 제출 기본 동작 막기
      
      // 입력한 음식과 칼로리 가져오기
      var foodName = document.getElementById('foodName').value;
      var calories = parseInt(document.getElementById('calories').value);
      var mealType = document.getElementById('meal-type').textContent.toLowerCase(); // 식사 타입 가져오기

      // 해당 식사 유형에 따라 데이터를 처리
      switch (mealType) {
        case '아침':
          addFoodToBreakfast(foodName, calories);
          break;
        case '점심':
          addFoodToLunch(foodName, calories);
          break;
        case '저녁':
          addFoodToDinner(foodName, calories);
          break;
        case '간식':
          addFoodToSnack(foodName, calories);
          break;
        default:
          break;
      }
    });

    // 아침 식사에 음식을 추가하는 함수
    function addFoodToBreakfast(foodName, calories) {
      // 새로운 음식 정보를 생성
      var foodInfo = foodName + ' (' + calories + ' cal)';

      // 총 칼로리 업데이트
      breakfastTotalCalories += calories;

      // 새로운 음식 정보를 화면에 표시
      var menuList = document.querySelector('#breakfast .menu_list');
      var newItem = document.createElement('div');
      newItem.textContent = foodInfo;
      menuList.appendChild(newItem);

      // 아침 식사의 총 칼로리 업데이트
      var breakfastCaloriesDisplay = document.getElementById('breakfastCalories');
      breakfastCaloriesDisplay.textContent = breakfastTotalCalories + ' Cal';
    }

    // 점심 식사에 음식을 추가하는 함수
    function addFoodToLunch(foodName, calories) {
      // 새로운 음식 정보를 생성
      var foodInfo = foodName + ' (' + calories + ' cal)';

      // 총 칼로리 업데이트
      lunchTotalCalories += calories;

      // 새로운 음식 정보를 화면에 표시
      var menuList = document.querySelector('#lunch .menu_list');
      var newItem = document.createElement('div');
      newItem.textContent = foodInfo;
      menuList.appendChild(newItem);

      // 점심 식사의 총 칼로리 업데이트
      var lunchCaloriesDisplay = document.getElementById('lunchCalories');
      lunchCaloriesDisplay.textContent = lunchTotalCalories + ' Cal';
    }

    // 저녁 식사에 음식을 추가하는 함수
    function addFoodToDinner(foodName, calories) {
      // 새로운 음식 정보를 생성
      var foodInfo = foodName + ' (' + calories + ' cal)';

      // 총 칼로리 업데이트
      dinnerTotalCalories += calories;

      // 새로운 음식 정보를 화면에 표시
      var menuList = document.querySelector('#dinner .menu_list');
      var newItem = document.createElement('div');
      newItem.textContent = foodInfo;
      menuList.appendChild(newItem);

      // 저녁 식사의 총 칼로리 업데이트
      var dinnerCaloriesDisplay = document.getElementById('dinnerCalories');
      dinnerCaloriesDisplay.textContent = dinnerTotalCalories + ' Cal';
    }

    // 간식에 음식을 추가하는 함수
    function addFoodToSnack(foodName, calories) {
      // 새로운 음식 정보를 생성
      var foodInfo = foodName + ' (' + calories + ' cal)';

      // 총 칼로리 업데이트
      snackTotalCalories += calories;

      // 새로운 음식 정보를 화면에 표시
      var menuList = document.querySelector('#snack .menu_list');
      var newItem = document.createElement('div');
      newItem.textContent = foodInfo;
      menuList.appendChild(newItem);

      // 간식의 총 칼로리 업데이트
      var snackCaloriesDisplay = document.getElementById('snackCalories');
      snackCaloriesDisplay.textContent = snackTotalCalories + ' Cal';
    }


  </script>
  

</div>

  <!--하단 메뉴-->
  <nav class="menu_container">
    <ul class="bottom_menu">
      <li class="menu">
        <a href="#"><img src="./img/home.png"></img></a>
      </li>

      <li class="menu">
        <a href="./exercise.html"><img src="./img/calendar hover.png"></img></a>
      </li>

      <li class="menu">
        <a href="./social.html"><img src="./img/social.png"></img></a>
      </li>

      <li class="menu">
        <a href="./mypage.html"><img src="./img/setting.png"></img></a>
      </li>

    </ul>
  </nav>
</body>

</html>